<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jQuery中append特性分析（一） | Bobscript</title>
    <meta name="description" content="白天切图，晚上切菜">
    
    
    <link rel="preload" href="/assets/css/0.styles.c745cea3.css" as="style"><link rel="preload" href="/assets/js/app.99e05f95.js" as="script"><link rel="preload" href="/assets/js/2.93e54dd3.js" as="script"><link rel="preload" href="/assets/js/9.9ac313ca.js" as="script"><link rel="prefetch" href="/assets/js/10.be48f157.js"><link rel="prefetch" href="/assets/js/11.7b371b13.js"><link rel="prefetch" href="/assets/js/12.c7ecc6e8.js"><link rel="prefetch" href="/assets/js/13.92f71886.js"><link rel="prefetch" href="/assets/js/14.d0ddbc49.js"><link rel="prefetch" href="/assets/js/15.22e5715b.js"><link rel="prefetch" href="/assets/js/16.935d7e52.js"><link rel="prefetch" href="/assets/js/17.2bf640e4.js"><link rel="prefetch" href="/assets/js/18.767ea5cf.js"><link rel="prefetch" href="/assets/js/19.1f08efcc.js"><link rel="prefetch" href="/assets/js/20.971af43e.js"><link rel="prefetch" href="/assets/js/21.0f961777.js"><link rel="prefetch" href="/assets/js/22.1f524836.js"><link rel="prefetch" href="/assets/js/23.17e819da.js"><link rel="prefetch" href="/assets/js/24.c8c3eace.js"><link rel="prefetch" href="/assets/js/25.269908c9.js"><link rel="prefetch" href="/assets/js/26.5266162e.js"><link rel="prefetch" href="/assets/js/27.1a1438e2.js"><link rel="prefetch" href="/assets/js/28.0eaa4122.js"><link rel="prefetch" href="/assets/js/29.7e470fb7.js"><link rel="prefetch" href="/assets/js/3.53dd634a.js"><link rel="prefetch" href="/assets/js/30.b6b84a09.js"><link rel="prefetch" href="/assets/js/31.048567d6.js"><link rel="prefetch" href="/assets/js/32.145ad0b8.js"><link rel="prefetch" href="/assets/js/33.62e812bd.js"><link rel="prefetch" href="/assets/js/34.31c05704.js"><link rel="prefetch" href="/assets/js/35.ba79a7a0.js"><link rel="prefetch" href="/assets/js/36.67a5b25b.js"><link rel="prefetch" href="/assets/js/37.b6b5b0f4.js"><link rel="prefetch" href="/assets/js/38.8897bd4e.js"><link rel="prefetch" href="/assets/js/39.dc3abd65.js"><link rel="prefetch" href="/assets/js/4.da34f57a.js"><link rel="prefetch" href="/assets/js/40.329d1f91.js"><link rel="prefetch" href="/assets/js/41.57cd30e9.js"><link rel="prefetch" href="/assets/js/42.8b4613f5.js"><link rel="prefetch" href="/assets/js/43.9854386a.js"><link rel="prefetch" href="/assets/js/44.3b4a01f5.js"><link rel="prefetch" href="/assets/js/45.3ca8aa82.js"><link rel="prefetch" href="/assets/js/46.055f433b.js"><link rel="prefetch" href="/assets/js/47.acfcb947.js"><link rel="prefetch" href="/assets/js/48.9de647b4.js"><link rel="prefetch" href="/assets/js/49.f39ceb73.js"><link rel="prefetch" href="/assets/js/5.7bbbf963.js"><link rel="prefetch" href="/assets/js/50.f5907641.js"><link rel="prefetch" href="/assets/js/51.36e3efaa.js"><link rel="prefetch" href="/assets/js/52.d5ddfb61.js"><link rel="prefetch" href="/assets/js/53.ec2d3182.js"><link rel="prefetch" href="/assets/js/54.17874d42.js"><link rel="prefetch" href="/assets/js/55.145aac7c.js"><link rel="prefetch" href="/assets/js/56.7fd1efa2.js"><link rel="prefetch" href="/assets/js/6.ccc445b6.js"><link rel="prefetch" href="/assets/js/7.b43b9a6e.js"><link rel="prefetch" href="/assets/js/8.a4af12d5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c745cea3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container vuepress-theme-simple"><header class="header"><a href="/" title="白天切图，晚上切菜" class="router-link-active">
      Bobscript
    </a> <div style="clear: both"></div></header> <section class="post-view"><div class="post-head"><h1 class="post-title">
      jQuery中append特性分析（一）
    </h1> <time datetime="2013-8-26" title="2013-8-26" pubdate="pubdate" class="post-date">
  5 years ago
</time></div> <div class="content default"><h1 id="jquery中append特性分析（一）"><a href="#jquery中append特性分析（一）" aria-hidden="true" class="header-anchor">#</a> jQuery中append特性分析（一）</h1> <p>jQuery中append、insert、after等函数的特性刚接触会摸不着头脑，为什么有时候A.append(B)执行之后B会消失？有时候又不会？本文就是为此疑惑准备的，如果不想看过程，可以直接跳到文末的总结处。</p> <table><thead><tr><th>方法</th> <th>源包装集/字串</th> <th>目标包装集体</th> <th>特性描述</th></tr></thead> <tbody><tr><td>A.append(B)<br>B.appendTo(A)<br>A.prepend(B)<br>B.prependTo(A)<br>A.before(B)<br>B.insertBefore(A)<br>A.after(B)<br>B.insertAfter(A)</td> <td>B</td> <td>A</td> <td>若目标包装集只匹配一个元素，则源(也包括同源包装集匹配的所有元素)将被移动到目标位置；若目标包装集包含多个元素，则源将保留在原来的位置，但同时复制一份相同的副本到目标位置。<br>由此，若目标只匹配一个元素时，使用前述方法后源将被删除。</td></tr></tbody></table> <p>举例说明：在上图中，A.append(B)表示把B添加到与A匹配的所有元素的现有内容后面，因此B是源，A是目标包装集。</p> <p>以上内容是我从网上搜索到的，现在具体说明。比如，有一个table，只有一行tr。</p> <p><img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAArCAMAAAA3zcOKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0UyOURGQTBFMzIxMUUzOUEyREE2RDI4QkQ4Q0Q0QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0UyOURGQjBFMzIxMUUzOUEyREE2RDI4QkQ4Q0Q0QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMzRTI5REY4MEUzMjExRTM5QTJEQTZEMjhCRDhDRDRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMzRTI5REY5MEUzMjExRTM5QTJEQTZEMjhCRDhDRDRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ueHkRgAAAFFQTFRFAC+JAF2wAAAAXbD/sF0ALwAAiS8AidT/1P//AAAv/7Bd/9SJ///U1Ikv//+wXQAAL4nUsP//AABdidTUXQAv1NSJsP+wLwBdREREr6+v////fQm2yQAAAVBJREFUeNrsm8tuwjAUBcONY8CPhNIXzf9/aBeV6L2uYjaJkNM5u9lEI09jpJZ2M2t7HUdAQfb8gl+s3f0U5Ce59XeQc2i/4E1tPdzswUjddy+oqq6Hmz0Yqb/vIIdFQQpSkIIU/PcF4+eLxtCdKpgPcwXdRVPyfQXHt2MFkapKmYLjdNVecTAiBQYxIgVmMV5O+mVM/nxcRqTqUrpgENFeWUSLFOjEiFhMXrTXOIkWKTAOor0KROqBlCoY5JKVV5beKZEC3fnVKxGLyV8/pl+vcereh34J43AIyqtApB5J2c/BbO6G2dnr3GLy5jIocJzM3RCHvoLB3A0lIlWVoiAFKUhBClKQghwWBSlIQQquUZBfIvO3CQpSkIIUpCCH1WJB8zXg9XCzByPFd7b3MgruouCNtTv++2wX7yCjIKMgoyAFGQUZBRkFKcga27cAAwDU7UH6dSRLRQAAAABJRU5ErkJggg==" alt="jAppend2"></p> <p>然后为td绑定事件，使得每一次点击td都会变红，语句：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> tds<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table tr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'td'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tds<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAA5CAMAAAB502AaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMkE3QTUyQjBFMzIxMUUzQkYwQkIxQTkyOTg4QzIxNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMkE3QTUyQzBFMzIxMUUzQkYwQkIxQTkyOTg4QzIxNSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIyQTdBNTI5MEUzMjExRTNCRjBCQjFBOTI5ODhDMjE1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIyQTdBNTJBMEUzMjExRTNCRjBCQjFBOTI5ODhDMjE1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RQcPCwAAAGBQTFRFoKCgAAAAjo6OAF2widT/AAAvLwAAiS8A/7Bd///UXbD//9SJXQAAsF0AAC+J1P//1Ikv//+wL4nUsP//AABd1AAArgAAXQAvidTU1NSJLwBdsP+wREREr6+v/wAA////pd96zQAAAddJREFUeNrsm9tygjAURT1aA0howYq92fr/f1ltdTgngA8Rx4mz1tsWJ+xkaRgVZzNInD2kDQYxCBgEDGIQMAgYhHiD35AwfwZ5Iaf+HmQZ0je4U0wX+wdFMb/uPLFD3Wy2dyp1NqikThf7B+WnY37deWKHutls71QKgxjEIAYxiEEMnh4pP191zJ9fLsR6sb8Qq7VORbYyM9x6PcPm7Uk/OYhjpU5DSauHiio1GJMppQ02fqN7lc4oC2IupkgQazG9KjEGt6INFtlS9wriaKn/oZxZrLhSQzGdUspgLqJ71SJaWRArMUVsLDLRvRovxuAhKoOlE90riOOljkO1h49darEiSw3EhEp1BnNZ16pXLatKKQtitXzPVBEbi2zz5btejX/+cMqgl9Z1Bku3yFWvIF4oJce18lu1WLGl+jGlUuY6WJu9YV/ZC5+NRWY2gyA23uwNpbPXQWeug7nZG8I4Vuq8IbdmQ44pNRiTKYVBDGIQgxjEIAYxiEEMYhCDExjkm21+m8AgBjGIQQxiMEWD5i7g6WLv4Fxz3Xmih7rZbO9Tijt+H+SOX0ja4A4Shn+fPcJ7EDAIGAQMYhAwCBgEDGIQMAgYBAxiEDAIGAQMYhBS4FeAAQCKwE25hI6tngAAAABJRU5ErkJggg==" alt="jAppend4"></p> <p>点击有什么现象？单元格变红了，但是你可能很奇怪，为什么table没有append内容呢？使劲点，使劲点，还是只变红不增加。原来，tds只是指向了$('tr')这个jQuery对象，按照上面清单的解释，相当于是抽出第一行的tr，然后又把它自己插入table，所以，等于没有变化嘛，我们加上.clone()方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> tds<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table tr'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后我们发现，成功了，点击一下，table内容扩大了一倍。但是，继续点击，不会增加了？？？？</p> <p><img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAABXCAMAAABLLQ4wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RTk2QTNGMzBFMzIxMUUzQkU4Q0ZBNTc3MUQ4RDQ2OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RTk2QTNGNDBFMzIxMUUzQkU4Q0ZBNTc3MUQ4RDQ2OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFOTZBM0YxMEUzMjExRTNCRThDRkE1NzcxRDhENDY5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFOTZBM0YyMEUzMjExRTNCRThDRkE1NzcxRDhENDY5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/QcGMgAAAGBQTFRF/wAAAAAAAF2wAC+JsF0AXbD/idT/LwAAAAAv/7Bd1P//iS8A///U/9SJXQAA1Ikv//+wL4nUsP//AABdjo6OidTUXQAv1NSJsP+wLwBd1AAAsAAAiQAAREREr6+v////FwYj4wAAAhJJREFUeNrs3WtPwkAQhWEGCkvtFcG70P//L8UY7cxaSSDd2N2+59sYSU/6yEJgEhcdiTsLbgGCBEGCIIIkbsETiTdfgvwlx/4c5D7EL3hUGW88T6JyCHWda0sdJzfe/tAfQaU63vgpuOhzCHWda0tNoMVopRBEEEEEEUQQwe+fVC/3esxXdxfGZtldGLOdEXyvtWBZrPXvto+bC2OAUoMtIi1lBNt6r3tVzhTxxlxMEW9sxAi+iRHMRPcqi+3m7zFEqaEWsZbSgrmI7tWI6CLemIkpYseyECNYixZsz6PqVTnRvbwxSKmBFtGWUoK57BrVq5F1pop4Y7Z9KFQRO5bF/rlWgrW8ul6wrVdPru9VuWWuenljmFK/W8Rbyr4ONuZs6DJ7nNuxLMxh4I1tbV8HnTlFK2eOitycDf4YoNRgi0hLIYgggggiiCCCCCKIIIIIjiHIJ9t8N4EggggiiCCCMQqaNeDxxq476AS7zpWlTtMbb34oG7+xB8FUBFmPZmd7Bm8a5vleFEEEKYUggtysaARZj2ZnO+n16HnubKe0Hj3Pne2U1qPnubOd0kLDPPdkEESQUggiyM1CEEEEKYUgO9t8iMx3EwgiSCkEEURwooKsR7OzTf4nCCYheCTxhv8YksRzkCBIECQIIkgQJAgSBBEkCBIECYIIEgQJggRBBAmCBEGCIIIEQYIgQTDZfAgwAIGqbn6fXchzAAAAAElFTkSuQmCC" alt="jAppend3"></p> <p>原理分析：此时虽然在给tds赋值时候加上了clone，但是tds依旧只是一个对象，它只能使用一次，所以，如果想要达到我们预想的目的，应该是</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tds<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最终的符合我们预期的代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> tds<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table tr'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//此时tds复制了最原始的时候table的所有tr元素。</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'td'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这句用来显示当前点击的位置</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tds<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>如果我们把第一行的clone去掉会怎样？代码变成：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> tds<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table tr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此时tds指向此时，也就是最初的时候table的所有tr元素。</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token string">'td'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-color'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">　　$</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tds<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>发现问题了？后面每次增加的那行都完整复制表格第一行的样子！如果第一行已经有格子被“污染变红”了，新增的那一行也是这样！图如下所示</p> <p><img src="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAcEAAAF5CAMAAADQ/GHCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNzU2Nzg4NTBFMzExMUUzOTlEQkMzMUUwRjExOUU3QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNzU2Nzg4NjBFMzExMUUzOTlEQkMzMUUwRjExOUU3QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE3NTY3ODgzMEUzMTExRTM5OURCQzMxRTBGMTE5RTdCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE3NTY3ODg0MEUzMTExRTM5OURCQzMxRTBGMTE5RTdCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+USI1IgAAAGBQTFRFAF2wAC+JLwAA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" alt="jAppend"></p> <p>原因很简单，因为js的赋值其实是传地址而不是传值，看起来是在操作tds，其实是对tds指向的对象进行操作，所以tds其实是指向table的第一行，当然复制也是复制它咯。所以我们应该最开始就把它clone出来，避免后期被改变。</p> <p>以上所有是对于B为jQuery对象的情况，如果是字符串呢？就像</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>tds<span class="token operator">=</span><span class="token string">&quot;&lt;tr&gt; &lt;td&gt;1&lt;/td&gt; &lt;td&gt;2&lt;/td&gt; &lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>这种情况下，tds能够随便用任意多次。</p> <p>总结：对于上文的几种对DOM操作的方法，假如B是jQuery对象，把B应用到A上面，A也是一个jQuery对象，那么如果A的长度大于1，则B不会受影响，可以反复使用很多次；如果A长度为1，那么B应用到A之后，B会被移动（看起来就像从原来的位置删除了，但是没有被删除，只是被移动到了A的某个位置）。</p> <p>如果B是一个简单的字符串，那么B就可以随便使用任意多次而不会被移动。</p></div></section> <footer class="footer">
  Copyright © 2019 <br>Powered by
  <a href="https://vuepress.vuejs.org/" rel="noopener" target="_blank">
    VuePress</a> | Theme
  <a href="https://github.com/viko16/vuepress-theme-simple" rel="noopener" target="_blank">
    Simple
  </a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.99e05f95.js" defer></script><script src="/assets/js/2.93e54dd3.js" defer></script><script src="/assets/js/9.9ac313ca.js" defer></script>
  </body>
</html>
